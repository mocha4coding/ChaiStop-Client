{"ast":null,"code":"import _slicedToArray from\"E:/ENGAGE/practice/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//PostFormModal\n//Modal To create threads in a subforum\nimport ClickOutHandler from\"react-clickout-handler\";import AuthButton from\"./AuthButton\";import ThreadTextEditor from\"./ThreadTextEditor\";import{useState,useContext}from'react';import CreateThreadModalContext from\"./CreateThreadModalContext\";import{Redirect}from'react-router-dom';import{XIcon}from'@heroicons/react/outline';import axios from\"axios\";import AuthModalContext from\"./AuthModalContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreateThreadModal(){var modalContext=useContext(CreateThreadModalContext);var authModalContext=useContext(AuthModalContext);var visibleClass=modalContext.show!==false?'block':'hidden';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),newPostId=_useState6[0],setNewPostId=_useState6[1];//triggered when post button is hit. The contents of the thread are saved into database.\nfunction createThread(){var data={title:title,body:body};axios.post('https://chai-stop-server.herokuapp.com/postthread',data,{withCredentials:true}).then(function(response){setNewPostId(response.data._id);}).catch(function(error){if(error.response.status===401){authModalContext.setShow('login');}});}if(newPostId){return/*#__PURE__*/_jsx(Redirect,{to:'/posts/'+newPostId});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"w-screen h-screen fixed top-0 bottom-0 left-0 z-10 flex \"+visibleClass,style:{backgroundColor:'rgba(0,0,0,0.8)'},children:/*#__PURE__*/_jsx(ClickOutHandler,{onClickOut:function onClickOut(){},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-4/5 md:w-2/4  border border-theme_dark rounded-md bg-white p-5 text-theme_dark  mx-auto self-center align-middle\",children:[/*#__PURE__*/_jsx(\"div\",{className:'text-right',children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){modalContext.setShow(false);},children:/*#__PURE__*/_jsx(XIcon,{solid:true,className:'bg-theme_dark-highlight border border-theme_dark-highlight rounded-md text-theme_dark h-7 w-7 align-right'})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl mb-3\",children:\"Create a post:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border-2  w-full border-theme_dark-brighter bg-theme_brighter rounded-md p-2 my-2 block \",placeholder:'Thread Title',value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(ThreadTextEditor,{value:body,onChange:function onChange(e){return setBody(e.target.value);},placeholder:'Thread Contents(required)'}),/*#__PURE__*/_jsxs(\"div\",{className:'text-right',children:[/*#__PURE__*/_jsx(AuthButton,{outline:true,className:'mr-1',onClick:function onClick(){modalContext.setShow(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(AuthButton,{onClick:function onClick(){return createThread();},children:\"Post\"})]})]})})})});}export default CreateThreadModal;","map":{"version":3,"sources":["E:/ENGAGE/practice/client/src/CreateThreadModal.js"],"names":["ClickOutHandler","AuthButton","ThreadTextEditor","useState","useContext","CreateThreadModalContext","Redirect","XIcon","axios","AuthModalContext","CreateThreadModal","modalContext","authModalContext","visibleClass","show","title","setTitle","body","setBody","newPostId","setNewPostId","createThread","data","post","withCredentials","then","response","_id","catch","error","status","setShow","backgroundColor","e","target","value"],"mappings":"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","sourcesContent":["//PostFormModal\r\n\r\n//Modal To create threads in a subforum\r\n\r\n\r\nimport ClickOutHandler from \"react-clickout-handler\";\r\nimport AuthButton from \"./AuthButton\";\r\nimport ThreadTextEditor from \"./ThreadTextEditor\";\r\n\r\nimport {useState, useContext} from 'react';\r\nimport CreateThreadModalContext from \"./CreateThreadModalContext\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nimport {XIcon} from '@heroicons/react/outline';\r\nimport axios from \"axios\";\r\nimport AuthModalContext from \"./AuthModalContext\";\r\n\r\nfunction CreateThreadModal(){\r\n\r\n    const modalContext = useContext(CreateThreadModalContext);\r\n    const authModalContext = useContext(AuthModalContext);\r\n\r\n\r\n    const visibleClass =  modalContext.show !== false ? 'block' : 'hidden';\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [newPostId, setNewPostId] = useState(null);\r\n\r\n    //triggered when post button is hit. The contents of the thread are saved into database.\r\n    function createThread(){\r\n        const data = {title, body};\r\n        axios.post('https://chai-stop-server.herokuapp.com/postthread', data, {withCredentials : true})\r\n            .then(response => {\r\n               \r\n                setNewPostId(response.data._id);\r\n            })\r\n            .catch(error => {\r\n                if(error.response.status === 401){\r\n                    authModalContext.setShow('login');\r\n                }\r\n            });\r\n    }\r\n\r\n\r\n    if(newPostId){\r\n        return (<Redirect to = {'/posts/' + newPostId} />);\r\n        \r\n    }\r\n    return(\r\n        <div>\r\n             <div className = {\"w-screen h-screen fixed top-0 bottom-0 left-0 z-10 flex \" + visibleClass} style = {{backgroundColor:'rgba(0,0,0,0.8)'}}>\r\n             <ClickOutHandler onClickOut={() => {}}>\r\n             {/* <ClickOutHandler onClickOut={() => {modalContext.setShow(false)}}> */}\r\n\r\n                \r\n                    <div className = \"w-4/5 md:w-2/4  border border-theme_dark rounded-md bg-white p-5 text-theme_dark  mx-auto self-center align-middle\">\r\n\r\n\r\n                        <div className = {'text-right'}>\r\n                            <button onClick={() => {modalContext.setShow(false)}}>\r\n                          \r\n                                <XIcon solid className = {'bg-theme_dark-highlight border border-theme_dark-highlight rounded-md text-theme_dark h-7 w-7 align-right'}/>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <h1 className = \"text-2xl mb-3\" >Create a post:</h1>\r\n                        <input \r\n                            className = {\"border-2  w-full border-theme_dark-brighter bg-theme_brighter rounded-md p-2 my-2 block \"} \r\n                            placeholder = {'Thread Title'} \r\n                            value = {title}\r\n                            onChange = {e => setTitle(e.target.value)}\r\n                        />\r\n\r\n                        <ThreadTextEditor \r\n                            value = {body}\r\n                            onChange = {e => setBody(e.target.value)}\r\n                            placeholder = {'Thread Contents(required)'}\r\n                        />\r\n\r\n                        <div className = {'text-right'}>\r\n                            \r\n                            <AuthButton outline className = {'mr-1'} \r\n                                        onClick={() => {modalContext.setShow(false)}}\r\n                            >\r\n                                Cancel\r\n                            </AuthButton>\r\n\r\n                            \r\n                            <AuthButton\r\n                                onClick = {() => createThread()}\r\n                            >\r\n                                Post\r\n                            </AuthButton>\r\n\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </ClickOutHandler>\r\n             </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateThreadModal;"]},"metadata":{},"sourceType":"module"}