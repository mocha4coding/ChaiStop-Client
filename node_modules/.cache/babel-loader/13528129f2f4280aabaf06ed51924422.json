{"ast":null,"code":"import _slicedToArray from\"E:/ENGAGE/practice/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import AuthInput from\"./AuthInput\";import AuthButton from'./AuthButton';import{useState,useContext}from'react';import axios from\"axios\";import AuthModalContext from\"./AuthModalContext\";import ClickOutHandler from'react-clickout-handler';import UserContext from\"./UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AuthModal(props){var _useState=useState('login'),_useState2=_slicedToArray(_useState,2),modalType=_useState2[0],setModalType=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),errorBody=_useState10[0],setErrorBody=_useState10[1];var modalContext=useContext(AuthModalContext);var user=useContext(UserContext);var visibleClass=modalContext.show!==false?'block':'hidden';if(modalContext.show&&modalContext.show!==modalType){setModalType(modalContext.show);}function register(e){e.preventDefault();var data={email:email,username:username,password:password};if(password.length<8){setErrorBody('Password should be atleast 8 characters long');}else{axios.post('https://chai-stop-server.herokuapp.com/register',data,{withCredentials:true}).then(function(response){user.setUser({username:username});modalContext.setShow(false);setEmail('');setPassword('');setUsername('');}).catch(function(error){setErrorBody('Username already exists.Try a different one.');});}}function login(){var data={username:username,password:password};axios.post('https://chai-stop-server.herokuapp.com/login',data,{withCredentials:true}).then(function(){modalContext.setShow(false);user.setUser({username:username});}).catch(function(error){setErrorBody('Incorrect username or password');});;}return/*#__PURE__*/_jsx(\"div\",{className:\"w-screen h-screen  fixed top-0 bottom-0 left-0 z-20 flex \"+visibleClass,style:{backgroundColor:'rgba(0,0,0,0.95)'},children:/*#__PURE__*/_jsx(ClickOutHandler,{onClickOut:function onClickOut(){return modalContext.setShow(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-4/5 sm:w-1/3  border border-theme_dark rounded-md bg-white p-5 text-theme_dark  mx-auto self-center align-middle\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700\",children:errorBody})}),modalType==='login'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl mb-3\",children:\" Login\"})}),modalType==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl mb-3\",children:\" Register\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(AuthInput,{type:\"email\",className:\"mb-2 w-full \",placeholder:\"email (Eg: abc@xyz.com)\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Username\",/*#__PURE__*/_jsx(AuthInput,{type:\"text\",className:\"mb-2 w-full \",placeholder:\"username (Eg: MOni_4)\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password\",/*#__PURE__*/_jsx(AuthInput,{type:\"password\",className:\"mb-4 w-full \",placeholder:\"password (Eg: xyz1234)\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),modalType==='login'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AuthButton,{outline:true,className:\"w-full \",onClick:function onClick(){return login();},children:\"Log In\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{className:\"font-bold\",onClick:function onClick(){modalContext.setShow('register');setErrorBody('');},children:\"Sign Up\"})]})]}),modalType==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AuthButton,{outline:true,className:\"w-full \",onClick:function onClick(e){return register(e);},children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"button\",{className:\"font-bold\",onClick:function onClick(){modalContext.setShow('login');setErrorBody('');},children:\"Log In\"})]})]})]})})});}export default AuthModal;","map":{"version":3,"sources":["E:/ENGAGE/practice/client/src/AuthModal.js"],"names":["AuthInput","AuthButton","useState","useContext","axios","AuthModalContext","ClickOutHandler","UserContext","AuthModal","props","modalType","setModalType","email","setEmail","username","setUsername","password","setPassword","errorBody","setErrorBody","modalContext","user","visibleClass","show","register","e","preventDefault","data","length","post","withCredentials","then","response","setUser","setShow","catch","error","login","backgroundColor","target","value"],"mappings":"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","sourcesContent":["import AuthInput from \"./AuthInput\";\r\nimport AuthButton from './AuthButton';\r\nimport {useState, useContext} from 'react';\r\nimport axios from \"axios\";\r\nimport AuthModalContext from \"./AuthModalContext\";\r\nimport ClickOutHandler from 'react-clickout-handler';\r\nimport UserContext from \"./UserContext\";\r\n\r\nfunction AuthModal(props){\r\n    const [modalType, setModalType] = useState('login');\r\n    const [email, setEmail] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    \r\n    const [errorBody, setErrorBody] = useState('')\r\n    const modalContext = useContext(AuthModalContext);\r\n    const user = useContext(UserContext);\r\n\r\n    const visibleClass = modalContext.show !== false ? 'block' : 'hidden';\r\n\r\n    if(modalContext.show && modalContext.show !== modalType) {\r\n        setModalType(modalContext.show);\r\n    }\r\n\r\n    function register(e){\r\n       \r\n        e.preventDefault();\r\n        const data = {email, username, password};\r\n        if(password.length < 8 )\r\n        {\r\n            setErrorBody('Password should be atleast 8 characters long');\r\n        }\r\n        else\r\n        {\r\n        axios.post('https://chai-stop-server.herokuapp.com/register', data, {withCredentials:true})\r\n        .then((response) => {\r\n            \r\n           \r\n            user.setUser({username});\r\n            modalContext.setShow(false);\r\n            setEmail('');\r\n            setPassword('');\r\n            setUsername('');\r\n          })\r\n          .catch((error) =>{\r\n            \r\n             setErrorBody('Username already exists.Try a different one.');\r\n          });\r\n        }\r\n    }\r\n\r\n    function login() {\r\n        \r\n        const data = {username,password};\r\n        axios.post('https://chai-stop-server.herokuapp.com/login', data, {withCredentials:true})\r\n        .then(() => {\r\n            modalContext.setShow(false);\r\n            user.setUser({username})\r\n          })\r\n        .catch((error) =>{\r\n           \r\n            setErrorBody('Incorrect username or password');\r\n         });\r\n        ;\r\n      }\r\n    \r\n    return (\r\n        <div className = {\"w-screen h-screen  fixed top-0 bottom-0 left-0 z-20 flex \" + visibleClass} style = {{backgroundColor:'rgba(0,0,0,0.95)'}}>\r\n           <ClickOutHandler onClickOut={() => modalContext.setShow(false)}>\r\n\r\n           \r\n                <div className = \"w-4/5 sm:w-1/3  border border-theme_dark rounded-md bg-white p-5 text-theme_dark  mx-auto self-center align-middle\">\r\n\r\n                \r\n                        <div className = \"\"><span className = \"text-red-700\">{errorBody}</span></div>\r\n               \r\n                {modalType === 'login' && (\r\n                \r\n                    <div>\r\n                        <h1 className = \"text-2xl mb-3\" > Login</h1>\r\n                    </div>)\r\n                }\r\n                {modalType === 'register' && (\r\n                \r\n                    <div>\r\n                        <h1 className = \"text-2xl mb-3\"> Register</h1>\r\n                        <label>\r\n                            Email\r\n                            <AuthInput type = \"email\" className = \"mb-2 w-full \" placeholder = \"email (Eg: abc@xyz.com)\" value = {email} onChange = {e => setEmail(e.target.value)} />\r\n                        </label>\r\n                    </div>)\r\n                }\r\n                <label>\r\n                Username\r\n                <AuthInput type = \"text\" className = \"mb-2 w-full \" placeholder = \"username (Eg: MOni_4)\" value = {username} onChange = {e => setUsername(e.target.value)} />\r\n                </label>\r\n\r\n                <label>\r\n                Password\r\n                <AuthInput type = \"password\" className = \"mb-4 w-full \" placeholder = \"password (Eg: xyz1234)\" value = {password} onChange = {e => setPassword(e.target.value)} />\r\n                </label>\r\n\r\n\r\n                {modalType === 'login' && (\r\n                \r\n                    <div>\r\n                        <AuthButton outline className = \"w-full \" onClick = {() => login()}>Log In</AuthButton>\r\n                        <div>\r\n                            Don't have an account? <button className = \"font-bold\" onClick={() => {modalContext.setShow('register'); setErrorBody('');}}>Sign Up</button>\r\n                        </div>\r\n                    </div>)\r\n                }\r\n                {modalType === 'register' && (\r\n                \r\n                    <div>\r\n                        <AuthButton outline className = \"w-full \" onClick = {e => register(e)}>Sign Up</AuthButton>\r\n                        <div>\r\n                            Already have an account? <button className = \"font-bold\" onClick={() => {modalContext.setShow('login'); setErrorBody(''); }}>Log In</button>\r\n                        </div>\r\n                    </div>)\r\n                }\r\n                </div>\r\n            </ClickOutHandler>\r\n        </div>\r\n    );\r\n}\r\nexport default AuthModal;"]},"metadata":{},"sourceType":"module"}