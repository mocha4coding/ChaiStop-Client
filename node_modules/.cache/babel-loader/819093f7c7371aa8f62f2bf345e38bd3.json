{"ast":null,"code":"import _objectSpread from\"E:/ENGAGE/practice/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/ENGAGE/practice/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Thread from\"./Thread\";import CommentForm from\"./CommentForm\";import RootCommentContext from\"./RootCommentContext\";import{useState,useEffect}from'react';import Comments from\"./Comments\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Comment(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),commentsTotals=_useState6[0],setCommentsTotals=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),userVotes=_useState8[0],setUserVotes=_useState8[1];function refreshComments(){axios.get('https://chai-stop-server.herokuapp.com/comments/root/'+props.id).then(function(response){setComments(response.data);});};// function refreshVotes(){\n//     const commentsIds = [post._id, ...comments.map(c => c._id) ];\n//     axios.post('https://chai-stop-server.herokuapp.com/votes', {postsIds: commentsIds}, {withCredentials: true})\n//         .then(response => {\n//             setCommentsTotals(response.data.postsTotals);\n//             setUserVotes(response.data.userVotes);\n//         })\n// }\nuseEffect(function(){if(props.comment){setPost(props.post);}else{axios.get('https://chai-stop-server.herokuapp.com/postthread/'+props.id).then(function(response){setPost(response.data);});refreshComments();}},[props.id,props.comment]);// axios.get('https://chai-stop-server.herokuapp.com/postthread/' + props.id)\n// .then(response => {\n//     setPost(response.data);\n// });\n// refreshComments();\n// useEffect(() => {\n//     refreshVotes();\n// }, [comments.length]);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-theme_dark-alternateBright\",children:[post&&/*#__PURE__*/_jsx(Thread,_objectSpread(_objectSpread({},post),{},{open:true})),!!post&&!!post._id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{className:\"border-theme_dark-alternateBright my-4\"}),/*#__PURE__*/_jsx(CommentForm,{onSubmit:function onSubmit(){return refreshComments();},rootId:post._id,parentId:post._id,showAuthor:true}),/*#__PURE__*/_jsx(\"hr\",{className:\"border-theme_dark-brighter my-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"theme_dark-alternateBright\",children:/*#__PURE__*/_jsx(RootCommentContext.Provider,{value:{refreshComments:refreshComments},children:/*#__PURE__*/_jsx(Comments,{parentId:post._id,rootId:post._id,comments:comments})})})]})]});}export default Comment;","map":{"version":3,"sources":["E:/ENGAGE/practice/client/src/Comment.js"],"names":["Thread","CommentForm","RootCommentContext","useState","useEffect","Comments","axios","Comment","props","post","setPost","comments","setComments","commentsTotals","setCommentsTotals","userVotes","setUserVotes","refreshComments","get","id","then","response","data","comment","_id"],"mappings":"+RAAA,MAAOA,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,sBAA/B,CACA,OAAQC,QAAR,CAAkBC,SAAlB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAIA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAuB,CAEnB,cAAwBL,QAAQ,CAAC,EAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA4CT,QAAQ,CAAC,IAAD,CAApD,yCAAOU,cAAP,eAAuBC,iBAAvB,eACA,eAAkCX,QAAQ,CAAC,IAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eAGA,QAASC,CAAAA,eAAT,EAA0B,CACtBX,KAAK,CAACY,GAAN,CAAU,wDAA0DV,KAAK,CAACW,EAA1E,EACCC,IADD,CACM,SAAAC,QAAQ,CAAI,CACdT,WAAW,CAACS,QAAQ,CAACC,IAAV,CAAX,CAGH,CALD,EAOH,EAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEAlB,SAAS,CAAC,UAAM,CAEZ,GAAGI,KAAK,CAACe,OAAT,CAAiB,CACbb,OAAO,CAACF,KAAK,CAACC,IAAP,CAAP,CACH,CAFD,IAGI,CACAH,KAAK,CAACY,GAAN,CAAU,qDAAuDV,KAAK,CAACW,EAAvE,EACCC,IADD,CACM,SAAAC,QAAQ,CAAI,CACdX,OAAO,CAACW,QAAQ,CAACC,IAAV,CAAP,CAGH,CALD,EAOAL,eAAe,GAClB,CAKJ,CAnBQ,CAmBP,CAACT,KAAK,CAACW,EAAP,CAAWX,KAAK,CAACe,OAAjB,CAnBO,CAAT,CAuBA;AACA;AACA;AAGA;AAEA;AASA;AACA;AACA;AACA,mBAEA,aAAK,SAAS,CAAG,+BAAjB,WACKd,IAAI,eACE,KAAC,MAAD,gCAAYA,IAAZ,MAAkB,IAAI,CAAE,IAAxB,GAFX,CAKM,CAAC,CAACA,IAAF,EAAU,CAAC,CAACA,IAAI,CAACe,GAAjB,eACkB,wCACA,WAAI,SAAS,CAAG,wCAAhB,EADA,cAEA,KAAC,WAAD,EAAa,QAAQ,CAAI,0BAAMP,CAAAA,eAAe,EAArB,EAAzB,CACa,MAAM,CAAIR,IAAI,CAACe,GAD5B,CAEa,QAAQ,CAAIf,IAAI,CAACe,GAF9B,CAGa,UAAU,CAAI,IAH3B,EAFA,cASA,WAAI,SAAS,CAAG,iCAAhB,EATA,cAYA,YAAK,SAAS,CAAG,4BAAjB,uBACA,KAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAI,CAACP,eAAe,CAAfA,eAAD,CAAtC,uBACI,KAAC,QAAD,EAAU,QAAQ,CAAIR,IAAI,CAACe,GAA3B,CACU,MAAM,CAAIf,IAAI,CAACe,GADzB,CAEU,QAAQ,CAAEb,QAFpB,EADJ,EADA,EAZA,GANxB,GAFA,CAgCH,CAED,cAAeJ,CAAAA,OAAf","sourcesContent":["import Thread from \"./Thread\";\r\nimport CommentForm from \"./CommentForm\";\r\nimport RootCommentContext from \"./RootCommentContext\";\r\nimport {useState, useEffect} from 'react';\r\nimport Comments from \"./Comments\";\r\nimport axios from \"axios\";\r\n\r\n\r\n\r\nfunction Comment(props){\r\n\r\n    const [post, setPost] = useState({});\r\n    const [comments, setComments] = useState([]);\r\n    const [commentsTotals, setCommentsTotals] = useState(null);\r\n    const [userVotes, setUserVotes] = useState(null);\r\n\r\n\r\n    function refreshComments(){\r\n        axios.get('https://chai-stop-server.herokuapp.com/comments/root/' + props.id)\r\n        .then(response => {\r\n            setComments(response.data);\r\n          \r\n            \r\n        });\r\n       \r\n    };\r\n\r\n    // function refreshVotes(){\r\n    //     const commentsIds = [post._id, ...comments.map(c => c._id) ];\r\n    //     axios.post('https://chai-stop-server.herokuapp.com/votes', {postsIds: commentsIds}, {withCredentials: true})\r\n    //         .then(response => {\r\n    //             setCommentsTotals(response.data.postsTotals);\r\n    //             setUserVotes(response.data.userVotes);\r\n    //         })\r\n\r\n    // }\r\n\r\n    useEffect(() => {\r\n\r\n        if(props.comment){\r\n            setPost(props.post);\r\n        }\r\n        else{\r\n            axios.get('https://chai-stop-server.herokuapp.com/postthread/' + props.id)\r\n            .then(response => {\r\n                setPost(response.data);\r\n                \r\n                \r\n            });\r\n    \r\n            refreshComments();\r\n        }\r\n       \r\n\r\n        \r\n       \r\n    },[props.id, props.comment]);\r\n\r\n\r\n\r\n    // axios.get('https://chai-stop-server.herokuapp.com/postthread/' + props.id)\r\n    // .then(response => {\r\n    //     setPost(response.data);\r\n        \r\n        \r\n    // });\r\n\r\n    // refreshComments();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // useEffect(() => {\r\n    //     refreshVotes();\r\n    // }, [comments.length]);\r\n    return(\r\n    \r\n    <div className = \"bg-theme_dark-alternateBright\">\r\n        {post && (\r\n               <Thread {...post} open={true}/>\r\n                   \r\n           )}\r\n         {!!post && !!post._id && (\r\n                            <>\r\n                            <hr className = \"border-theme_dark-alternateBright my-4\"/>\r\n                            <CommentForm onSubmit = {() => refreshComments()}\r\n                                         rootId = {post._id} \r\n                                         parentId = {post._id}\r\n                                         showAuthor = {true}/>\r\n\r\n\r\n\r\n                            <hr className = \"border-theme_dark-brighter my-4\"/>\r\n                            {/* <RootCommentContext.Provider value = {{refreshComments, refreshVotes, commentsTotals,userVotes}}> */}\r\n                            \r\n                            <div className = \"theme_dark-alternateBright\">\r\n                            <RootCommentContext.Provider value = {{refreshComments}}>\r\n                                <Comments parentId = {post._id} \r\n                                          rootId = {post._id} \r\n                                          comments={comments} />\r\n                            </RootCommentContext.Provider>\r\n                            </div>\r\n                            </>\r\n                        )\r\n        }\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Comment;"]},"metadata":{},"sourceType":"module"}