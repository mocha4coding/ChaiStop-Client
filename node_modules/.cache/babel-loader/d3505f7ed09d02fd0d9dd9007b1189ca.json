{"ast":null,"code":"import _slicedToArray from\"E:/ENGAGE/practice/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useState}from\"react\";import ThreadTextEditor from\"./ThreadTextEditor\";import UserContext from\"./UserContext\";import AuthButton from\"./AuthButton\";import axios from\"axios\";import AuthModalContext from\"./AuthModalContext\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function CommentForm(props){var user=useContext(UserContext);var authModalContext=useContext(AuthModalContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),CommentBody=_useState2[0],setCommentBody=_useState2[1];function postComment(e){e.preventDefault();var data={body:CommentBody,parentId:props.parentId,rootId:props.rootId};axios.post(\"https://chai-stop-server.herokuapp.com/postcomment\",data,{withCredentials:true}).then(function(response){setCommentBody('');if(props.onSubmit){props.onSubmit();}}).catch(function(error){if(error.response.status===401){authModalContext.setShow('login');}});}return/*#__PURE__*/_jsxs(\"div\",{children:[props.showAuthor&&/*#__PURE__*/_jsxs(\"p\",{className:'text-theme_dark-brighter text-sm mb-2',children:[\" Comment as :\",/*#__PURE__*/_jsxs(\"span\",{class:\"text-theme_border opacity-50 font-bold text-sm\",children:[user.username,\" \"]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return postComment(e);},children:[/*#__PURE__*/_jsx(ThreadTextEditor,{onChange:function onChange(e){return setCommentBody(e.target.value);},value:CommentBody,placeholder:'Type your comment here...',className:\"bg-theme_border\"}),/*#__PURE__*/_jsxs(\"div\",{className:'text-right',children:[!!props.onCancel&&/*#__PURE__*/_jsx(AuthButton,{outline:true,className:\"mr-1\",onClick:function onClick(e){return props.onCancel();},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-theme_dark\",children:\"    Cancel \"})}),/*#__PURE__*/_jsx(AuthButton,{className:\"mb-1 mr-1\",children:\"Comment\"})]})]})]});}export default CommentForm;","map":{"version":3,"sources":["E:/ENGAGE/practice/client/src/CommentForm.js"],"names":["useContext","useState","ThreadTextEditor","UserContext","AuthButton","axios","AuthModalContext","CommentForm","props","user","authModalContext","CommentBody","setCommentBody","postComment","e","preventDefault","data","body","parentId","rootId","post","withCredentials","then","response","onSubmit","catch","error","status","setShow","showAuthor","username","target","value","onCancel"],"mappings":"gJAAA,OAAQA,UAAR,CAAoBC,QAApB,KAAmC,OAAnC,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,C,wFAGA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA2B,CACvB,GAAMC,CAAAA,IAAI,CAAGT,UAAU,CAACG,WAAD,CAAvB,CACA,GAAMO,CAAAA,gBAAgB,CAAGV,UAAU,CAACM,gBAAD,CAAnC,CAEA,cAAsCL,QAAQ,CAAC,EAAD,CAA9C,wCAAOU,WAAP,eAAoBC,cAApB,eAEA,QAASC,CAAAA,WAAT,CAAqBC,CAArB,CAAuB,CACnBA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,IAAI,CAAG,CAACC,IAAI,CAACN,WAAN,CAAmBO,QAAQ,CAACV,KAAK,CAACU,QAAlC,CAA4CC,MAAM,CAACX,KAAK,CAACW,MAAzD,CAAb,CACAd,KAAK,CAACe,IAAN,CAAW,oDAAX,CAAiEJ,IAAjE,CAAsE,CAACK,eAAe,CAAE,IAAlB,CAAtE,EACCC,IADD,CACM,SAAAC,QAAQ,CAAI,CACdX,cAAc,CAAC,EAAD,CAAd,CACA,GAAGJ,KAAK,CAACgB,QAAT,CAAkB,CACdhB,KAAK,CAACgB,QAAN,GACH,CACJ,CAND,EAMGC,KANH,CAMS,SAAAC,KAAK,CAAI,CACd,GAAGA,KAAK,CAACH,QAAN,CAAeI,MAAf,GAA0B,GAA7B,CAAiC,CAC7BjB,gBAAgB,CAACkB,OAAjB,CAAyB,OAAzB,EACH,CACJ,CAVD,EAWH,CACD,mBACA,uBAEQpB,KAAK,CAACqB,UAAN,eACI,WAAG,SAAS,CAAI,uCAAhB,wCAAsE,cAAM,KAAK,CAAG,gDAAd,WAAgEpB,IAAI,CAACqB,QAArE,OAAtE,GAHZ,cAOI,cAAM,QAAQ,CAAI,kBAAChB,CAAD,QAAOD,CAAAA,WAAW,CAACC,CAAD,CAAlB,EAAlB,wBAEI,KAAC,gBAAD,EACI,QAAQ,CAAI,kBAAAA,CAAC,QAAIF,CAAAA,cAAc,CAACE,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAlB,EADjB,CAEI,KAAK,CAAIrB,WAFb,CAGI,WAAW,CAAI,2BAHnB,CAII,SAAS,CAAI,iBAJjB,EAFJ,cAOI,aAAK,SAAS,CAAI,YAAlB,WAEK,CAAC,CAACH,KAAK,CAACyB,QAAR,eACG,KAAC,UAAD,EAAY,OAAO,KAAnB,CACY,SAAS,CAAG,MADxB,CAEY,OAAO,CAAI,iBAAAnB,CAAC,QAAIN,CAAAA,KAAK,CAACyB,QAAN,EAAJ,EAFxB,uBAII,aAAM,SAAS,CAAG,iBAAlB,yBAJJ,EAHR,cAYI,KAAC,UAAD,EACG,SAAS,CAAG,WADf,qBAZJ,GAPJ,GAPJ,GADA,CAkCH,CAED,cAAe1B,CAAAA,WAAf","sourcesContent":["import {useContext, useState} from \"react\";\r\nimport ThreadTextEditor from \"./ThreadTextEditor\";\r\nimport UserContext from \"./UserContext\"\r\nimport AuthButton from \"./AuthButton\";\r\nimport axios from \"axios\";\r\nimport AuthModalContext from \"./AuthModalContext\";\r\n\r\n\r\nfunction CommentForm(props){\r\n    const user = useContext(UserContext);\r\n    const authModalContext = useContext(AuthModalContext);\r\n\r\n    const [CommentBody, setCommentBody] = useState('');\r\n\r\n    function postComment(e){\r\n        e.preventDefault();\r\n        const data = {body:CommentBody, parentId:props.parentId, rootId:props.rootId};\r\n        axios.post(\"https://chai-stop-server.herokuapp.com/postcomment\", data,{withCredentials: true} )\r\n        .then(response => {\r\n            setCommentBody('');\r\n            if(props.onSubmit){\r\n                props.onSubmit();\r\n            }\r\n        }).catch(error => {\r\n            if(error.response.status === 401){\r\n                authModalContext.setShow('login');\r\n            }\r\n        });\r\n    }\r\n    return(\r\n    <div>\r\n        {\r\n            props.showAuthor && (\r\n                <p className = {'text-theme_dark-brighter text-sm mb-2'}> Comment as :<span class = \"text-theme_border opacity-50 font-bold text-sm\">{user.username} </span></p>\r\n            )\r\n        }\r\n        \r\n        <form onSubmit = {(e) => postComment(e)}>\r\n            \r\n            <ThreadTextEditor \r\n                onChange = {e => setCommentBody(e.target.value)}\r\n                value = {CommentBody}\r\n                placeholder = {'Type your comment here...'}\r\n                className = {\"bg-theme_border\"}/>\r\n            <div className = {'text-right'}>\r\n              \r\n                {!!props.onCancel && (\r\n                    <AuthButton outline \r\n                                className = \"mr-1\"\r\n                                onClick = {e => props.onCancel()}\r\n                    >\r\n                        <span className = \"text-theme_dark\">    Cancel </span>\r\n                    </AuthButton>\r\n                )\r\n\r\n                }\r\n                <AuthButton \r\n                   className = \"mb-1 mr-1\">\r\n                    Comment\r\n                </AuthButton>\r\n            </div>\r\n        </form>\r\n    </div>);\r\n}\r\n\r\nexport default CommentForm;"]},"metadata":{},"sourceType":"module"}